<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Chaos Mode — Mobile CRT Demo</title>
  <meta name="theme-color" content="#0a0a0a" />
  <style>
    :root{ --bg:#0a0a0a; --ink:#e6e6e6; --edge:#1f1f1f; --red:#e53935; }
    html,body{height:100%}
    body{
      margin:0;
      background:#000 radial-gradient(160% 100% at 50% 0%, #171717 0%, var(--bg) 60%, #000 100%) no-repeat;
      color:var(--ink);
      font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
    }
    .stage{max-width:960px;margin:clamp(12px,4vh,28px) auto;padding:clamp(10px,2.5vw,20px);}
    .screen{
      position:relative; overflow:hidden; border-radius:16px; padding:clamp(12px,3vw,24px);
      background:#0b0b0b; box-shadow:inset 0 0 60px rgba(255,255,255,.03), inset 0 -30px 80px rgba(0,0,0,.6), 0 18px 60px rgba(0,0,0,.65);
    }
    .screen::before{
      content:""; position:absolute; inset:-2%; border-radius:18px; pointer-events:none; mix-blend-mode:screen;
      background:radial-gradient(120% 60% at 50% 0%, rgba(255,255,255,.10), transparent 60%), radial-gradient(70% 100% at 50% 120%, rgba(255,255,255,.02), transparent 60%);
    }
    .scan::after{
      content:""; position:absolute; inset:0; pointer-events:none; opacity:.85; mix-blend-mode:soft-light;
      background:repeating-linear-gradient(to bottom, rgba(255,255,255,.015) 0 1px, rgba(0,0,0,.05) 1px 2px);
      animation:slidedown .9s linear infinite;
    }
    @keyframes slidedown { 50% { transform: translateY(1px);} }

    .hero h1{
      margin:0 0 .4rem; line-height:.95; font-weight:900;
      font-size:clamp(1.9rem,9vw,3.2rem); letter-spacing:.02em;
      text-shadow:-1px 0 0 rgba(255,0,0,.22), 1px 0 0 rgba(0,200,255,.22);
    }
    .hero p{ margin:0; color:#c9c9c9 }

    .grid{ display:grid; gap:12px; margin-top:16px; }
    .block{
      background:linear-gradient(180deg,#121212,#0f0f0f);
      border:1px solid var(--edge); border-radius:10px; padding:12px; min-height:96px;
      box-shadow:0 0 0 1px rgba(255,255,255,.02) inset;
    }
    .tag{ font-size:.72rem; color:#a0a0a0; text-transform:uppercase; letter-spacing:.12em }
    .h{ font-weight:700; margin:.25rem 0 .3rem }
    .copy{ color:#bdbdbd; font-size:.95rem }

    .test{
      display:flex; align-items:center; justify-content:center;
      min-height:140px; border:1px dashed #2a2a2a; background:#0e0e0e;
      border-radius:10px; text-align:center; padding:18px;
    }
    .ticker{ margin-top:14px; height:34px; border-top:1px solid #1b1b1b; border-bottom:1px solid #1b1b1b; overflow:hidden; background:#0a0a0a; display:flex; align-items:center; }
    .crawl{ position:relative; white-space:nowrap; will-change:transform; animation:crawl 22s linear infinite; font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; color:#b0b0b0; padding-left:8px; }
    .crawl b{ color:var(--red) }
    @keyframes crawl { from{ transform:translateX(100%) } to{ transform:translateX(-100%) } }

    @media (min-width:768px){
      body{ font-size:16px }
      .grid{ grid-template-columns:repeat(12,1fr); gap:16px; }
      .b1{ grid-column:span 7 } .b2{ grid-column:span 5 }
      .b3,.b4,.b5,.b6{ grid-column:span 3; min-height:140px }
      .test{ grid-column:span 12; min-height:220px }
    }

    .chaos-glitch{ font-weight:900 } /* hook for Chaos Mode */
  </style>
</head>
  <!-- Mobile controls for Chaos Mode -->
<style>
  .cm-fab { position:fixed; left:12px; bottom:12px; z-index:2147483647;
    display:flex; gap:10px; }
  .cm-btn { padding:10px 12px; border:1px solid #000; background:#fff; color:#000;
    font:13px/1 system-ui,-apple-system,Segoe UI,Roboto,sans-serif; box-shadow:3px 3px 0 #000;
    border-radius:8px; }
</style>
<div class="cm-fab" aria-label="Chaos controls">
  <button id="cm-open" class="cm-btn">Open Panel</button>
  <button id="cm-all"  class="cm-btn">Toggle All</button>
</div>

<script>
  // Ensure Chaos Mode is mounted
  window.addEventListener('DOMContentLoaded', () => {
    // If script hasn't auto-mounted yet, mount it
    if (!document.querySelector('[data-chaos-ui]') && window.Chaos?.enable) {
      window.Chaos.enable();
    }

    const ensurePanel = () => {
      // Create/show the panel if needed
      if (!document.querySelector('[data-chaos-ui]') && window.Chaos?.enable) {
        window.Chaos.enable();
      }
      const panel = document.querySelector('[data-chaos-ui]');
      if (panel) panel.style.display = '';
      return panel;
    };

    document.getElementById('cm-open').addEventListener('click', () => {
      ensurePanel(); // just show it
    });

    document.getElementById('cm-all').addEventListener('click', () => {
      const panel = ensurePanel();
      panel?.querySelector('[data-act="all"]')?.click(); // same as keyboard "Toggle All"
    });
  });
</script>
<body>
  <main class="stage">
    <section class="screen scan" aria-label="CRT Surface">
      <header class="hero">
        <h1 class="chaos-glitch" data-text="CHAOS MODE DEMO">CHAOS MODE DEMO</h1>
        <p>Mobile-first CRT page. Open the chaos panel with <code>Ctrl+Alt+C</code> (or any keyboard). Toggle modules and watch it bend.</p>
      </header>

      <section class="grid" aria-label="Program Blocks">
        <article class="block b1">
          <div class="tag">signal a</div>
          <div class="h">Forbidden Glimpse</div>
          <p class="copy">The picture leans, audio desyncs, frame breathes. Good—stress the seams.</p>
        </article>

        <article class="block b2">
          <div class="tag">signal b</div>
          <div class="h">Maintenance Interruption</div>
          <p class="copy">Please stand by. Nothing is wrong. Nothing is ever wrong.</p>
        </article>

        <article class="block b3">
          <div class="tag">ad break</div>
          <div class="h">Commodity Dream</div>
          <p class="copy">It sells you back your own attention. Limited time only.</p>
        </article>

        <article class="block b4">
          <div class="tag">promo</div>
          <div class="h">Tonight at 03:32</div>
          <p class="copy">The crawl says this is fine.</p>
        </article>

        <article class="block b5">
          <div class="tag">weather</div>
          <div class="h">Static with Chance of Snow</div>
          <p class="copy">Forecast: intermittent artifacts and gentle drift.</p>
        </article>

        <article class="block b6">
          <div class="tag">id</div>
          <div class="h">WLST — 32 MHz</div>
          <p class="copy">Licensed to nowhere. Broadcasting to you.</p>
        </article>

        <aside class="block test" aria-label="Test Pattern">
          <div class="chaos-glitch" data-text="PLEASE STAND BY">PLEASE STAND BY</div>
        </aside>
      </section>

      <div class="ticker" aria-hidden="true">
        <div class="crawl">▲ SYSTEM NOTICE: <b>CHAOS MODE</b> ENABLED • TOGGLE: LAYOUT MAYHEM · MUTATION STORM · LATENCY LAG · GLITCH OVERLAY • FAILURE IS A FEATURE •</div>
      </div>
    </section>
  </main>

  <!-- Load Chaos Mode (compact build) -->
  <script src="/chaos-mode.js"></script>
</body>
</html>
<script>
  // Auto-enable a few modules on load
  window.addEventListener('DOMContentLoaded', () => {
    // simulate clicking "Toggle All"
    document.querySelector('[data-chaos-ui][data-act="all"]')?.click();
  });
</script>

